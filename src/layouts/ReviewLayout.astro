---
import Footer from "../components/Footer.astro";
import type { ReviewData } from "../content.config";
import ContentsNav from "../components/ContentsNav/ContentsNav.astro";
import BackToTopButton from "../components/BackToTopButton.astro";
import Navbar from "../components/Navbar.astro";
import { getTagsFromData } from "../components/tags/tags";

import "../styles/global.css";
import "../styles/reviewpage.css";
import ReviewTagbar from "../components/tags/ReviewTagbar.astro";
interface Props {
	data: ReviewData;
}

const { data } = Astro.props;
const tags = getTagsFromData(data);
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
		<meta name="generator" content={Astro.generator} />
		<title>{`${data.id} Course Review`}</title>
	</head>
	<body class:list={["main-white"]}>
		<Navbar />
		<article class={`${`main-white`} text-black h-full z-0`}>
			<hgroup class="px-5 md:py-8 lg:py-12 mt-1 md:px-20 lg:px-40 shadow-md">
				<section class="p-3">
					<p class="font-bv text-xl sm:text-2xl my-3">UNSW Course Reviews</p>
					<h1 class="font-playfair font-bold text-2xl sm:text-4xl my-3">{`${data.id}: ${data.longTitle}`}</h1>
					<p class="font-bv text-lg my-3">{((date) => `${date[1]} ${date[2]}, ${date[3]}`)(new Date(data.dateReviewed).toDateString().split(" "))}</p>
				</section>
				<div class="pb-10 px-3">
					<ReviewTagbar tags={tags}>
				</div>
				{/*
				* <a class:list={["hover:brightness-110 transition-all"]} href={data.thumbnailUrl} target="_blank">
					<img class="rounded-t-xl object-cover rounded-t-xl h-120 w-full cursor-pointer" src={data.thumbnail} />
				</a>
				*/}
			</hgroup>
			<main id="review-article" class={`main-white mt-10 flex flex-col font-manrope mask-t-from-99% mask-t-to-100% items-start`}>
				<div class:list={["px-5 md:px-10 lg:px-40 xl:px-60 text-lg grid grid-cols-4 gap-15 lg:gap-30"]}>
					<div class:list={["order-2 hidden md:block"]}>
						<div class:list={["sticky top-0 right-0 w-full h-10 pt-[4rem] mb-70"]}>
							<ContentsNav data={data}/>
							<aside class:list={["mt-10"]}>
								<a href="/reviews" id="other-reviews" class:list={["text-sm font-bold"]}>‚Üê See other reviews</a>
						</aside>
						</div>
					</div>
					<div class:list={["col-span-4 md:col-span-3 order-1"]}>
						<slot />
					</div>
				</div>
				<BackToTopButton otherClass="px-5 md:px-10 lg:px-40 xl:px-60 my-20 md:mt-20 md:mb-40"/>
			</main>
		</article>
		<Footer />
	</body>
</html>
